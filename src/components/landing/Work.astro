<section id="tiktok-videos" class="py-24 px-8">
  <h2 class="text-2xl font-semibold text-center mb-8">Algunos de mis videos</h2>

  <div class="flex flex-wrap gap-8 justify-center overflow-x-auto">
    
    <!-- Video 1 -->
    <div class="tiktok-video-container flex justify-center items-center w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
      <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@guillecstr_/video/7414440498192026912" data-video-id="7414440498192026912" style="max-width: 100%; min-width: 325px;">
        <section>
          <a target="_blank" title="@guillecstr_" href="https://www.tiktok.com/@guillecstr_?refer=embed">@guillecstr_</a> AFTERMOVIE FERIA ARDALES! üéßüï∫ üé•@N.A. Visuals  
          <a title="dj" target="_blank" href="https://www.tiktok.com/tag/dj?refer=embed">#dj</a>
          <a title="music" target="_blank" href="https://www.tiktok.com/tag/music?refer=embed">#music</a>
          <a title="parati" target="_blank" href="https://www.tiktok.com/tag/parati?refer=embed">#parati</a>
          <a title="trend" target="_blank" href="https://www.tiktok.com/tag/trend?refer=embed">#trend</a>
          <a target="_blank" title="‚ô¨ sonido original - Guille Castro" href="https://www.tiktok.com/music/sonido-original-7414440541871508257?refer=embed">‚ô¨ sonido original - Guille Castro</a>
        </section>
      </blockquote>
      <!-- El script se carga solo cuando el video entra en el viewport -->
      <script data-src="https://www.tiktok.com/embed.js" async></script>
    </div>

    <!-- Video 2 -->
    <div class="tiktok-video-container flex justify-center items-center w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
      <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@guillecstr_/video/7286794414695910688" data-video-id="7286794414695910688" style="max-width: 100%; min-width: 325px;">
        <section>
          <a target="_blank" title="@guillecstr_" href="https://www.tiktok.com/@guillecstr_?refer=embed">@guillecstr_</a> AFTERMOVIE FERIA ALCAL√Å DEL VALLE  üé• @ELNIEVAS  
          <a title="dj" target="_blank" href="https://www.tiktok.com/tag/dj?refer=embed">#dj</a>
          <a title="feria" target="_blank" href="https://www.tiktok.com/tag/feria?refer=embed">#FERIA</a>
          <a title="music" target="_blank" href="https://www.tiktok.com/tag/music?refer=embed">#music</a>
          <a target="_blank" title="‚ô¨ sonido original - Guille Castro" href="https://www.tiktok.com/music/sonido-original-7286794439736380193?refer=embed">‚ô¨ sonido original - Guille Castro</a>
        </section>
      </blockquote>
      <!-- El script se carga solo cuando el video entra en el viewport -->
      <script data-src="https://www.tiktok.com/embed.js" async></script>
    </div>

    <!-- Video 3 -->
    <div class="tiktok-video-container flex justify-center items-center w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
      <blockquote class="tiktok-embed" cite="https://www.tiktok.com/@guillecstr_/video/7269053715632508193" data-video-id="7269053715632508193" style="max-width: 100%; min-width: 325px;">
        <section>
          <a target="_blank" title="@guillecstr_" href="https://www.tiktok.com/@guillecstr_?refer=embed">@guillecstr_</a> AFTERMOVIE <a title="feria" target="_blank" href="https://www.tiktok.com/tag/feria?refer=embed">#FERIA</a> MALAGA üìçCASETA ADN  üé• @ELNIEVAS  
          <a title="dj" target="_blank" href="https://www.tiktok.com/tag/dj?refer=embed">#dj</a>
          <a title="parati" target="_blank" href="https://www.tiktok.com/tag/parati?refer=embed">#parati</a>
          <a title="trend" target="_blank" href="https://www.tiktok.com/tag/trend?refer=embed">#trend</a>
          <a title="music" target="_blank" href="https://www.tiktok.com/tag/music?refer=embed">#music</a>
          <a target="_blank" title="‚ô¨ sonido original - Guille Castro" href="https://www.tiktok.com/music/sonido-original-7269053722486295329?refer=embed">‚ô¨ sonido original - Guille Castro</a>
        </section>
      </blockquote>
      <!-- El script se carga solo cuando el video entra en el viewport -->
      <script data-src="https://www.tiktok.com/embed.js" async></script>
    </div>

  </div>
</section>

<script>
  // Intersection Observer para cargar los videos solo cuando sean visibles
  document.addEventListener('DOMContentLoaded', function () {
    const videos = document.querySelectorAll('.tiktok-video-container');

    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const script = entry.target.querySelector('script');
          if (script && script.dataset.src) {
            script.src = script.dataset.src; // Cargar el script de TikTok
            observer.unobserve(entry.target); // Dejar de observar este elemento
          }
        }
      });
    }, { threshold: 0.5 }); // Cargar el video cuando el 50% sea visible

    videos.forEach(video => {
      observer.observe(video);
    });
  });
</script>
